sudo: false
language: php
php:
  - 5.6
before_script:
  - gem install dpl
script:
  - zip -r $TRAVIS_BUILD_NUMBER.package.zip . > /dev/null
before_deploy:
- mkdir -p dpl_cd_upload
- FILENAME=$TRAVIS_BUILD_NUMBER.package.zip
- cp $FILENAME dpl_cd_upload/
deploy:
- provider: elasticbeanstalk
  access-key-id: AKIAJ35YIGD6WQVEUV6A
  secret-access-key:
    secure: "R5qDsZvT2Ef0Vz7fpwH59rjW4+E4njZyBkB2byaMP+t8eDMHBUuRg+xJLMdSb5Eh8r/OcbnJmtqGUpeRS1PzMOyaLVK8+uaOzpQ17pqd4XL2kC5FX2/yQUZNS8V1bYXroJqGOuol7ZKTyQPGnt1Df9fyhOFKq2YpijJ7mEugLcODShabL7xuzv4aKH7Lg3cvBR9VGJJrhj9KNmgKRJWlK+YKQ3vYXA5tNG+s6vk8uhtWej0f8yGywmbt9dG4YKLIC0XiH9p2HMWsARN1zX3N1mulsbe23VUaFu22A0pXKqn+WS2wpbsEs2GgJBL087J6wk71yJ39llazSLu/++GfIJEaFr3q7+2ZGhNk9BmEPcHCAjWturi/f/lK4qht0akqFq1HFXWMX3u97z+isufEp2+/uK+c1tMA6fcJndEHgKvc+BWm8AaM4IZZulRjhkuRvNv3cEGZanw6HJt24RB55yteQHL2ulE0SNB6YJAqu5bPwK/sUSA4cL3Tgika0UHDir7+3sQS0ONs3vfZipNE9ptPDL0iTd4cLzRSr2767wJO0UUI6l3iGvLbi2gS8WdKF7C5F0jiGZKjipQnRXvJQMqD3nITNsv6ySpxWi12sr+9chD+/ilQu/VGvzpCAWDstwyLBmCyof9zejzUUXqGfGY5Tab8MzOmNJDEequV/SY="
  bucket_name: wordpress-blog-deployments
  bucket_path: 'releases'
  zip-file: 'dpl_cd_upload/$TRAVIS_BUILD_NUMBER.package.zip'
  app: Blog
  env: production
  skip_cleanup: true
  on:
    repo: rlgod/danielparker.com.au-wordpress
    branch: release
  region: ap-southeast-2
branches:
  only:
  - release
